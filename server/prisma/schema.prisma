generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  idUser          String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name            String
  email           String?         @unique
  phone           String?         @unique
  address         String?
  password        String
  birth_day       DateTime?       @db.Date
  education_level String?
  hometown        String?
  cccd_id         Int?
  cccd_place      String?
  ethnicity       String?
  religion        String?
  enlistment_date DateTime?
  rank            String?
  position        String?
  department      String?
  role            String?
  created_at      DateTime        @default(now())
  updated_at      DateTime        @updatedAt
  avt             String?         @db.VarChar(1000)
  SHQN            String          @db.VarChar
  medicalProfile  MedicalProfile?

  @@map("users")
}

model MedicalProfile {
  id                    String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId                String   @unique @db.Uuid
  health_insurance_code String?
  height_cm             Float?
  weight_kg             Float?
  bmi                   Float?
  medical_history       String?
  current_disease       String?
  treatment_plan        String?
  blood_type            String?
  created_at            DateTime @default(now())
  updated_at            DateTime @updatedAt
  user                  User     @relation(fields: [userId], references: [idUser], onDelete: Cascade)

  @@map("medical_profiles")
}
